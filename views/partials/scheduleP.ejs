<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
<link href='https://use.fontawesome.com/releases/v5.0.6/css/all.css' rel='stylesheet'>
<link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/fullcalendar@5.6.0/main.min.css'>

<button class="fc-dayGridMonth-button btn btn-primary" onclick="popup()" id='plus' type='submit'>+</button>
<form action="addFreeTime" method="post">
<!-- The Modal -->
	<div id="popup" class="modal">
		<!-- Modal content -->

		<div class="modal-content">
		<div class="modal-title" style='font-size:xx-large; font-size:xx-large;'>
		Add free time
		<span class="close" onclick='closep()'>&times;</span>			 
		</div>
			<label for="adults">Date</label>
			<input type="date" id="date" name="date">

			<label for="children">From</label>
			<select id="from" class='selectpicker' name="from">
				<% for(var i = 0 ; i < times.length ; i++) { %>
					<option><%= times[i] %></option>
				<% }; %>
			</select>
			<label for="children" class='selectpicker' name='to'>To</label>
			<select id="to" name="to">
				<% for(var i = 0 ; i < times.length ; i++) { %>
					<option><%= times[i] %></option>
				<% }; %>
			</select>

			<br>
			<button class="btn btn-primary btn-sm border rounded-pill float-center align-content-center" id='add' type="submit">Add</button>
				
		</div>
	</div>
</form>
<div id='calendar'>
</div>
<ul style='border-color:rgb(195, 39, 39); margin-top: 10px;'>
		<li class="Legend-item">
		  <span class="Legend-colorBox" style="background-color: green;">
		  </span>
		  <span class="Legend-label">
			Free time
		  </span>
		</li>
		<li class="Legend-item"style='margin-left:20px;'>
			<span class="Legend-colorBox" style="background-color: rgb(195, 39, 39);">
			</span>
			<span class="Legend-label">
			  Reservations
			</span>
		  </li>
	</ul>	

<button class="fc-dayGridMonth-button btn btn-primary" onclick="popupD()" id='statis' type='submit'>Staticstical info</button>

<div id="popupD" class="modal">
	<!-- Modal content -->

	<div class="modal-content">
	<div class="modal-title" style='font-size:xx-large; font-size:xx-large;'>
	Statistical info
	<span class="close" onclick='closepD()'>&times;</span>			 
	</div>
		
	<table class="graph">
		<thead>
			<tr>
				<th scope="col">Item</th>
				<th scope="col">Percent</th>
			</tr>
		</thead><tbody>
			<tr style="height:85%">
				<th scope="row">Keep at home</th>
				<td><span>85%</span></td>
			</tr>
			<tr style="height:23%">
				<th scope="row">Take for a walk</th>
				<td><span>23%</span></td>
			</tr>
		</tbody>
	</table>

		<br>

			
	</div>
</div>




<script>
	function popup() {
   		document.getElementById('popup').style.display ='block';
   };
   function popupD() {
   		document.getElementById('popupD').style.display ='block';
   };
   // When the user clicks on <span> (x), close the modal
   function closep() {
   		document.getElementById('popup').style.display = 'none';
   };

      // When the user clicks on <span> (x), close the modal
	function closepD() {
   		document.getElementById('popupD').style.display = 'none';
   };


   
   // When the user clicks anywhere outside of the modal, close it
   window.onclick = function(event) {
	if (event.target == document.getElementsByClassName('modal')) {
		document.getElementsByClassName('modal').style.display = 'none';
	}
   };
</script>


<script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.6.0/main.min.js'></script>
<script>
	
document.addEventListener('DOMContentLoaded', function() {
  var calendarEl = document.getElementById('calendar');
  var freeTime = Array.from(<%- JSON.stringify(freeTime) %>)
  var reservations = Array.from(<%- JSON.stringify(reservations) %>)
  var calendar = new FullCalendar.Calendar(calendarEl, {
    initialView: 'dayGridMonth',
    initialDate: new Date(),
    themeSystem: "bootstrap",
    headerToolbar: {
      left: 'prev,next today',
      center: 'title',
      right: 'dayGridMonth,timeGridWeek,timeGridDay'
    },
    events: freeTime.concat(reservations)
	
});
  calendar.render();
});
</script>