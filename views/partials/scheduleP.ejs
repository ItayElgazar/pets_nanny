<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
<link href='https://use.fontawesome.com/releases/v5.0.6/css/all.css' rel='stylesheet'>
<link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/fullcalendar@5.6.0/main.min.css'>


<button class="fc-dayGridMonth-button btn btn-primary" onclick="popup()" id='plus' type='submit'>+</button>
<form action="addFreeTime" method="post">
<!-- The Modal -->
<div id="popup" class="modal">
	<!-- Modal content -->

	<div class="modal-content">
    <div class="modal-title">
      Add free time
      <span class="close" onclick='closep()'>&times;</span>			 
    </div>
			  <label for="adults">Date</label>
			  <input type="date" id="date" name="date">
  
			  <label for="children">From</label>
			  <select id="from" name="from">
				<% for(var i = 0 ; i < times.length ; i++) { %>
					<option><%= times[i] %></option>
				<% }; %>
			  </select>
			  <label for="children">To</label>
			  <select id="to" name="to">
				<% for(var i = 0 ; i < times.length ; i++) { %>
					<option><%= times[i] %></option>
				<% }; %>
			  </select>

		<br>
			<button class="btn btn-primary btn-sm border rounded-pill float-center align-content-center" id='add' type="submit">Add</button>
		</form>

	</div>
</div>
<div id='calendar'></div>
<script>
	function popup() {
   	document.getElementById('popup').style.display ='block';
   };



   // When the user clicks on <span> (x), close the modal
   function closep() {
   	document.getElementById('popup').style.display = 'none';
   };
   
   // When the user clicks anywhere outside of the modal, close it
   window.onclick = function(event) {
   if (event.target == document.getElementsByClassName('modal')) {
	   document.getElementsByClassName('modal').style.display = 'none';
   }
   };
</script>



<style>

.btn {
	background: #573b8a !important;
	border-color: #573b8a !important;
}

#add{
		width: 22%;
		height: 40px;
		margin: 10px auto;
		justify-content: center;
		display: block;
		color: #fff;
		background: #573b8a;
		font-size: 2rem;
		font-weight: bold;
		margin-top: 15px;
		outline: none;
		border: none;
		border-radius: 10px;
		transition: .2s ease-in;
		cursor: pointer;
	}
#add:hover, #open:hover{
	background: #573b8a;

}
.btn:hover{
	background-color: #573b8a;
	border-color: #573b8a !important;
}
#plus{
	display: block;
	margin-left: 150px;
	position: absolute;
}
.modal-content {
	margin:  auto;
	margin-top: 10%;
	padding-right: 30px;
	padding: 20px;
	width: 60%;
	text-align: center;
	font-size: 22px;

}
.close {

text-align: right;
width: 15px;
color: black;
float: right;
font-size: 28px;
font-weight: bold;
}

.close:hover,
.close:focus {
color: black;
text-decoration: none;
cursor: pointer;
}
.jumbotron{
	width: 1250px;
}
#calendar {
  height: 420px !important;
  width: 100% !important;

  margin-top: auto;
}
.fc-daygrid-event-dot {
		margin: 0 4px;
		box-sizing: content-box;
		width: 0;
		height: 0;
		border: 4px solid #1e7531;
		border: calc(var(--fc-daygrid-event-dot-width,8px)/ 2) solid var(--fc-event-border-color,#1e7531);
}
</style>


<script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.6.0/main.min.js'></script>
<script>
	
document.addEventListener('DOMContentLoaded', function() {
  var calendarEl = document.getElementById('calendar');
  var freeTime = Array.from(<%- JSON.stringify(freeTime) %>)
  var reservations = Array.from(<%- JSON.stringify(reservations) %>)

  var calendar = new FullCalendar.Calendar(calendarEl, {
    initialView: 'dayGridMonth',
    initialDate: new Date(),
    themeSystem: "bootstrap",
    headerToolbar: {
      left: 'prev,next today',
      center: 'title',
      right: 'dayGridMonth,timeGridWeek,timeGridDay'
    },
    events: freeTime.concat(reservations)
	
});


  calendar.render();
});
</script>
